/* ============================================
   RESET Y BASE
   ============================================ */
* { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --primary:#2563eb; --primary-dark:#1e40af; --secondary:#64748b;
  --success:#10b981; --warning:#f59e0b; --danger:#ef4444; --info:#06b6d4;
  --bg-body:#f8fafc; --bg-card:#ffffff; --bg-hover:#f1f5f9;
  --text-primary:#0f172a; --text-secondary:#475569; --text-muted:#94a3b8;
  --border:#e2e8f0; --border-focus:#3b82f6;
  --shadow-sm:0 1px 2px 0 rgb(0 0 0 / .05);
  --shadow:0 1px 3px 0 rgb(0 0 0 / .1);
  --shadow-md:0 4px 6px -1px rgb(0 0 0 / .1);
  --shadow-lg:0 10px 15px -3px rgb(0 0 0 / .1);
  --radius:.5rem; --radius-sm:.25rem; --radius-lg:.75rem;
  --spacing-xs:.25rem; --spacing-sm:.5rem; --spacing-md:1rem; --spacing-lg:1.5rem; --spacing-xl:2rem;
}

body {
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
  background:var(--bg-body); color:var(--text-primary); line-height:1.6; font-size:16px;
}

/* Utilidades */
.hidden{display:none!important}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}

/* Header */
.app-header{background:var(--bg-card);border-bottom:1px solid var(--border);box-shadow:var(--shadow-sm);position:sticky;top:0;z-index:100}
.header-container{max-width:1400px;margin:0 auto;padding:var(--spacing-md) var(--spacing-lg);display:flex;justify-content:space-between;align-items:center;gap:var(--spacing-lg)}
.header-brand{display:flex;align-items:center;gap:var(--spacing-md)}
.header-brand h1{font-size:1.5rem;font-weight:700;color:var(--primary)}
.header-user{display:flex;align-items:center;gap:var(--spacing-md)}
.user-info{text-align:right}
.user-name{font-weight:600;font-size:.875rem}
.user-role{font-size:.75rem;color:var(--text-secondary)}
.btn-logout{padding:var(--spacing-sm) var(--spacing-md);background:var(--danger);color:#fff;border:none;border-radius:var(--radius);cursor:pointer;font-size:.875rem;font-weight:500;transition:background .2s}
.btn-logout:hover{background:#dc2626}
.btn-logout:focus{outline:2px solid var(--danger);outline-offset:2px}

/* Nav */
.app-nav{background:var(--bg-card);border-bottom:1px solid var(--border)}
.nav-container{max-width:1400px;margin:0 auto;padding:0 var(--spacing-lg)}
.nav-tabs{display:flex;gap:var(--spacing-sm);list-style:none;overflow-x:auto}
.nav-tabs li{flex-shrink:0}
.nav-link{display:block;padding:var(--spacing-md) var(--spacing-lg);color:var(--text-secondary);text-decoration:none;border-bottom:2px solid transparent;font-weight:500;font-size:.875rem;transition:all .2s;white-space:nowrap}
.nav-link:hover{color:var(--primary);background:var(--bg-hover)}
.nav-link.active{color:var(--primary);border-bottom-color:var(--primary)}
.nav-link:focus{outline:2px solid var(--border-focus);outline-offset:-2px}

/* Main */
.main-container{max-width:1400px;margin:0 auto;padding:var(--spacing-xl) var(--spacing-lg)}

/* Card */
.card{background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius-lg);box-shadow:var(--shadow);overflow:hidden}
.card-header{padding:var(--spacing-lg);border-bottom:1px solid var(--border);background:var(--bg-hover)}
.card-title{font-size:1.25rem;font-weight:700;margin:0}
.card-body{padding:var(--spacing-lg)}
.card-footer{padding:var(--spacing-lg);border-top:1px solid var(--border);background:var(--bg-hover)}

/* Formularios */
.form-group{margin-bottom:var(--spacing-lg)}
.form-label{display:block;margin-bottom:var(--spacing-sm);font-weight:600;font-size:.875rem;color:var(--text-primary)}
.form-label.required::after{content:" *";color:var(--danger)}
.form-input,.form-select,.form-textarea{width:100%;padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--border);border-radius:var(--radius);font-size:.875rem;font-family:inherit;transition:all .2s;background:var(--bg-card)}
.form-input:focus,.form-select:focus,.form-textarea:focus{outline:none;border-color:var(--border-focus);box-shadow:0 0 0 3px rgba(59,130,246,.1)}
.form-input:disabled,.form-select:disabled,.form-textarea:disabled{background:var(--bg-hover);cursor:not-allowed;opacity:.6}
.form-textarea{resize:vertical;min-height:100px}
.form-error{display:block;margin-top:var(--spacing-xs);color:var(--danger);font-size:.75rem;font-weight:500}
.form-help{display:block;margin-top:var(--spacing-xs);color:var(--text-muted);font-size:.75rem}
.form-inline{display:flex;gap:var(--spacing-md);align-items:flex-end}
.form-inline .form-group{flex:1;margin-bottom:0}

/* Botones */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:var(--spacing-sm);padding:var(--spacing-sm) var(--spacing-lg);border:1px solid transparent;border-radius:var(--radius);font-size:.875rem;font-weight:600;text-decoration:none;cursor:pointer;transition:all .2s;white-space:nowrap}
.btn:disabled{opacity:.5;cursor:not-allowed}
.btn:focus{outline:2px solid transparent;outline-offset:2px;box-shadow:0 0 0 3px rgba(59,130,246,.3)}
.btn-primary{background:var(--primary);color:#fff}
.btn-primary:hover:not(:disabled){background:var(--primary-dark)}
.btn-secondary{background:var(--secondary);color:#fff}
.btn-secondary:hover:not(:disabled){background:#475569}
.btn-success{background:var(--success);color:#fff}
.btn-success:hover:not(:disabled){background:#059669}
.btn-danger{background:var(--danger);color:#fff}
.btn-danger:hover:not(:disabled){background:#dc2626}
.btn-outline{background:transparent;border-color:var(--border);color:var(--text-primary)}
.btn-outline:hover:not(:disabled){background:var(--bg-hover)}
.btn-sm{padding:var(--spacing-xs) var(--spacing-sm);font-size:.75rem}
.btn-lg{padding:var(--spacing-md) var(--spacing-xl);font-size:1rem}
.btn-group{display:flex;gap:var(--spacing-sm);flex-wrap:wrap}

/* Badges */
.badge{display:inline-flex;align-items:center;padding:.25rem .75rem;border-radius:9999px;font-size:.75rem;font-weight:600;white-space:nowrap}
.badge-urgencia-Poca{background:#dbeafe;color:#1e40af}
.badge-urgencia-Media{background:#fef3c7;color:#92400e}
.badge-urgencia-Urgente{background:#fee2e2;color:#991b1b}
.badge-prioridad-Baja{background:#f1f5f9;color:#475569}
.badge-prioridad-Normal{background:#dbeafe;color:#1e40af}
.badge-prioridad-Alta{background:#fed7aa;color:#9a3412}
.badge-prioridad-Crítica{background:#fecaca;color:#991b1b}
.badge-estado-Abierto{background:#dbeafe;color:#1e40af}
.badge-estado-Enespera{background:#fef3c7;color:#92400e}
.badge-estado-Escalado{background:#fed7aa;color:#9a3412}
.badge-estado-Encurso{background:#e0e7ff;color:#3730a3}
.badge-estado-Resuelto{background:#d1fae5;color:#065f46}

/* Tabla */
.table-container{overflow-x:auto;border:1px solid var(--border);border-radius:var(--radius)}
.table{width:100%;border-collapse:collapse;font-size:.875rem}
.table thead{background:var(--bg-hover)}
.table th{padding:var(--spacing-md);text-align:left;font-weight:600;color:var(--text-secondary);border-bottom:2px solid var(--border);white-space:nowrap}
.table td{padding:var(--spacing-md);border-bottom:1px solid var(--border)}
.table tbody tr:hover{background:var(--bg-hover)}
.table tbody tr:last-child td{border-bottom:none}
.table-actions{display:flex;gap:var(--spacing-sm)}
.table-empty{padding:var(--spacing-xl);text-align:center;color:var(--text-muted)}

/* Filtros */
.filters-bar{display:flex;gap:var(--spacing-md);margin-bottom:var(--spacing-lg);padding:var(--spacing-lg);background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius);flex-wrap:wrap}
.filters-bar .form-group{flex:1;min-width:200px;margin-bottom:0}
.search-box{position:relative;flex:2;min-width:300px}
.search-box input{padding-left:2.5rem}
.search-icon{position:absolute;left:var(--spacing-md);top:50%;transform:translateY(-50%);color:var(--text-muted)}

/* Modal */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1000;padding:var(--spacing-lg);overflow-y:auto}
.modal{background:var(--bg-card);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);max-width:800px;width:100%;max-height:90vh;overflow-y:auto}
.modal-header{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-lg);border-bottom:1px solid var(--border)}
.modal-title{font-size:1.25rem;font-weight:700;margin:0}
.modal-close{background:transparent;border:none;font-size:1.5rem;cursor:pointer;color:var(--text-muted);padding:var(--spacing-sm);line-height:1;border-radius:var(--radius)}
.modal-close:hover{background:var(--bg-hover);color:var(--text-primary)}
.modal-body{padding:var(--spacing-lg)}
.modal-footer{display:flex;justify-content:flex-end;gap:var(--spacing-sm);padding:var(--spacing-lg);border-top:1px solid var(--border)}

/* Notificaciones */
#notification-container{position:fixed;top:var(--spacing-lg);right:var(--spacing-lg);z-index:2000;display:flex;flex-direction:column;gap:var(--spacing-sm);max-width:400px}
.notification{background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow-lg);padding:var(--spacing-lg);display:flex;gap:var(--spacing-md);animation:slideIn .3s ease-out}
@keyframes slideIn{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}
.notification-icon{flex-shrink:0;width:20px;height:20px;border-radius:50%}
.notification-content{flex:1}
.notification-title{font-weight:600;margin-bottom:var(--spacing-xs);font-size:.875rem}
.notification-message{font-size:.875rem;color:var(--text-secondary)}
.notification-close{background:transparent;border:none;cursor:pointer;color:var(--text-muted);font-size:1.25rem;padding:0;line-height:1}
.notification-close:hover{color:var(--text-primary)}
.notification.success{border-left:4px solid var(--success)}
.notification.success .notification-icon{background:var(--success)}
.notification.error{border-left:4px solid var(--danger)}
.notification.error .notification-icon{background:var(--danger)}
.notification.info{border-left:4px solid var(--info)}
.notification.info .notification-icon{background:var(--info)}
.notification.warning{border-left:4px solid var(--warning)}
.notification.warning .notification-icon{background:var(--warning)}

/* Login */
.login-container{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:var(--spacing-lg)}
.login-card{max-width:400px;width:100%}
.login-title{text-align:center;margin-bottom:var(--spacing-xl)}
.user-select-grid{display:grid;gap:var(--spacing-md)}
.user-card{padding:var(--spacing-lg);border:2px solid var(--border);border-radius:var(--radius);cursor:pointer;transition:all .2s;background:var(--bg-card)}
.user-card:hover{border-color:var(--primary);background:var(--bg-hover)}
.user-card:focus{outline:2px solid var(--border-focus);outline-offset:2px}
.user-card-name{font-weight:600;margin-bottom:var(--spacing-xs)}
.user-card-email{font-size:.875rem;color:var(--text-secondary);margin-bottom:var(--spacing-xs)}
.user-card-role{font-size:.75rem;display:inline-block}

/* KPIs */
.kpi-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:var(--spacing-lg);margin-bottom:var(--spacing-xl)}
.kpi-card{padding:var(--spacing-lg);background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius)}
.kpi-label{font-size:.875rem;color:var(--text-secondary);margin-bottom:var(--spacing-sm)}
.kpi-value{font-size:2rem;font-weight:700;color:var(--primary)}
.kpi-sublabel{font-size:.75rem;color:var(--text-muted);margin-top:var(--spacing-xs)}

/* Historial */
.timeline{position:relative;padding-left:var(--spacing-xl)}
.timeline::before{content:'';position:absolute;left:0;top:0;bottom:0;width:2px;background:var(--border)}
.timeline-item{position:relative;padding-bottom:var(--spacing-lg)}
.timeline-item::before{content:'';position:absolute;left:calc(-1 * var(--spacing-xl) - 4px);top:0;width:10px;height:10px;border-radius:50%;background:var(--primary);border:2px solid var(--bg-card)}
.timeline-date{font-size:.75rem;color:var(--text-muted);margin-bottom:var(--spacing-xs)}
.timeline-event{font-weight:600;margin-bottom:var(--spacing-xs)}
.timeline-detail{font-size:.875rem;color:var(--text-secondary)}
.timeline-author{font-size:.75rem;color:var(--text-muted);margin-top:var(--spacing-xs)}

/* Detalle ticket */
.ticket-detail-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:var(--spacing-lg);margin-bottom:var(--spacing-xl)}
.detail-item{display:flex;flex-direction:column;gap:var(--spacing-xs)}
.detail-label{font-size:.75rem;font-weight:600;color:var(--text-muted);text-transform:uppercase}
.detail-value{font-size:.875rem;color:var(--text-primary)}
.section-divider{border:none;border-top:1px solid var(--border);margin:var(--spacing-xl) 0}

/* Accesibilidad */
*:focus-visible{outline:2px solid var(--border-focus);outline-offset:2px}
button:focus-visible,a:focus-visible,input:focus-visible,select:focus-visible,textarea:focus-visible{outline:2px solid var(--border-focus);outline-offset:2px}

/* Responsive */
@media (max-width:768px){
  .header-container{flex-direction:column;align-items:flex-start}
  .header-user{width:100%;justify-content:space-between}
  .nav-container{padding:0 var(--spacing-sm)}
  .main-container{padding:var(--spacing-lg) var(--spacing-sm)}
  .filters-bar{flex-direction:column}
  .filters-bar .form-group,.search-box{width:100%;min-width:100%}
  .form-inline{flex-direction:column;align-items:stretch}
  .ticket-detail-grid{grid-template-columns:1fr}
  .kpi-grid{grid-template-columns:1fr}
  #notification-container{left:var(--spacing-sm);right:var(--spacing-sm);max-width:none}
}

/* Loading */
.loading{display:flex;justify-content:center;align-items:center;padding:var(--spacing-xl)}
.spinner{width:40px;height:40px;border:4px solid var(--border);border-top-color:var(--primary);border-radius:50%;animation:spin .8s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* Acceso denegado */
.access-denied{text-align:center;padding:var(--spacing-xl)}
.access-denied-icon{font-size:3rem;margin-bottom:var(--spacing-lg)}
.access-denied-title{font-size:1.5rem;font-weight:700;margin-bottom:var(--spacing-md);color:var(--danger)}
.access-denied-message{color:var(--text-secondary);margin-bottom:var(--spacing-lg)}


/* ===== Logo/Branding ===== */
.brand-img{
  width:36px;
  height:36px;
  object-fit:contain;
}

/* Logo grande centrado para la portada (login) */
.login-logo{
  display:block;
  margin:0 auto 1.25rem auto;
  max-width:min(720px, 80%);
  height:auto;
}



/* Isotipo en el header */
.brand-logo{
  width: 34px;
  height: 34px;
  object-fit: contain;
  display: inline-block;
  margin-right: .5rem;
  vertical-align: middle;
}
/* Blindaje por si algún <h1> antiguo se cuela en la marca */
.header-brand h1 { 
  display: none !important; 
}

/* Alineación del isotipo del header */
.brand-logo{
  width: 44px;
  height: 44px;
  object-fit: contain;
  display: inline-block;
  margin-right: .5rem;
  vertical-align: middle;
}
